Ansible with Windows slave:
===========================

Need to install pywinrm in master linux

1.Launch windows server - 22
2.Install python as a pip

- sudo yum install python-pip -y
- pip install pywinrm

3. Update hosts file with windows public IP

vi hosts -> i

[windows]
Public IP

	[windows:vars]
	ansible_user=Administrator
	ansible_password=Admin123 
	ansible_port=5986
	ansible_connection=winrm
	ansible_winrm_server_cert_validation=ignore

esc:wq!

4. Connect windows server with RDC

Search lusrmgr.msc (Local user manager)

Administrator - Rightclick - setpasswd - proceed - Admin123 

5.Reopen the RDC session

Use the password which is recently changed (Admin123)

6.Use windows cli {Powershell ISE}

Need to configure the config file in powershell

https://github.com/ansible/ansible/blob/devel/examples/scripts/ConfigureRemotingForAnsible.ps1

Debug -> RUN / F5 => OK

ansible windows -i hosts -m win_ping

vi folder.yml (Slave name windows)


- hosts: windows
  gather_facts: true
  tasks:
  - name: Create a folder in target group node
    win_file:
      path: C:\ansible
      state: directory

esc :wq!

ansible-playbook -i hosts folder.yml

------------------------------------

IIS:
====

vi iis.yml

- name: Install IIS
  hosts: windows
  gather_facts: false
  tasks:
   - name: Install IIS
     win_feature:
      name: "web-server"
      state: present
      restart: yes
      include_sub_features: yes
      include_management_tools: yes

ansible-playbook -i hosts iis.yml

 




